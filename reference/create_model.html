<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create model — create_model • luna</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create model — create_model"><meta name="description" content="This is essentially a wrapper around the model-creation and -modification
functionality in pharmr/Pharmpy."><meta property="og:description" content="This is essentially a wrapper around the model-creation and -modification
functionality in pharmr/Pharmpy."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">luna</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/InsightRX/uno/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create model</h1>
      <small class="dont-index">Source: <a href="https://github.com/InsightRX/uno/blob/main/R/create_model.R" class="external-link"><code>R/create_model.R</code></a></small>
      <div class="d-none name"><code>create_model.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is essentially a wrapper around the model-creation and -modification
functionality in pharmr/Pharmpy.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_model</span><span class="op">(</span></span>
<span>  route <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"oral"</span>, <span class="st">"iv"</span><span class="op">)</span>,</span>
<span>  lag_time <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  n_transit_compartments <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  bioavailability <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  n_cmt <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  elimination <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"linear"</span>, <span class="st">"michaelis-menten"</span><span class="op">)</span>,</span>
<span>  iiv <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  iiv_type <span class="op">=</span> <span class="st">"exp"</span>,</span>
<span>  ruv <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"additive"</span>, <span class="st">"proportional"</span>, <span class="st">"combined"</span>, <span class="st">"ltbs"</span><span class="op">)</span>,</span>
<span>  covariates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  scale_observations <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  estimation_method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"foce"</span>, <span class="st">"saem"</span><span class="op">)</span>,</span>
<span>  estimation_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  uncertainty_method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sandwich"</span>, <span class="st">"smat"</span>, <span class="st">"rmat"</span>, <span class="st">"efim"</span>, <span class="st">"none"</span><span class="op">)</span>,</span>
<span>  tool <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nonmem"</span>, <span class="st">"nlmixr"</span>, <span class="st">"nlmixr2"</span><span class="op">)</span>,</span>
<span>  tables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fit"</span><span class="op">)</span>,</span>
<span>  full_tables <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  auto_init <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  auto_stack_encounters <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  mu_reference <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-route">route<a class="anchor" aria-label="anchor" href="#arg-route"></a></dt>
<dd><p>route of administration, either <code>oral</code> or <code>iv</code></p></dd>


<dt id="arg-lag-time">lag_time<a class="anchor" aria-label="anchor" href="#arg-lag-time"></a></dt>
<dd><p>add a lag time, default is <code>FALSE</code></p></dd>


<dt id="arg-n-transit-compartments">n_transit_compartments<a class="anchor" aria-label="anchor" href="#arg-n-transit-compartments"></a></dt>
<dd><p>number of transit-compartments for absorption
model. Default is <code>0</code>.</p></dd>


<dt id="arg-bioavailability">bioavailability<a class="anchor" aria-label="anchor" href="#arg-bioavailability"></a></dt>
<dd><p>Add a bioavailability parameter? Default is <code>FALSE</code>.
Will add using a logit function.</p></dd>


<dt id="arg-n-cmt">n_cmt<a class="anchor" aria-label="anchor" href="#arg-n-cmt"></a></dt>
<dd><p>number of elimination and distribution compartments. Default is
1, i.e. no peripheral distributions.</p></dd>


<dt id="arg-elimination">elimination<a class="anchor" aria-label="anchor" href="#arg-elimination"></a></dt>
<dd><p>elimination type, either <code>linear</code> or <code>michaelis-menten</code>.</p></dd>


<dt id="arg-iiv">iiv<a class="anchor" aria-label="anchor" href="#arg-iiv"></a></dt>
<dd><p>either <code>character</code> or a <code>list</code> object. If <code>character</code>, should be
either "basic" (only CL and V parameters) or "all" (IIV on all parameters).
If specified as a list object, it should contain the IIV magnitude (on SD
scale) for parameters and potential correlations specified using a tilde,
e.g. <code>list("CL" = 0.2, "V" = 0.3, "CL~V" = 0.1)</code>.</p></dd>


<dt id="arg-ruv">ruv<a class="anchor" aria-label="anchor" href="#arg-ruv"></a></dt>
<dd><p>one of <code>proportional</code>, <code>additive</code>, or <code>combined</code>.</p></dd>


<dt id="arg-covariates">covariates<a class="anchor" aria-label="anchor" href="#arg-covariates"></a></dt>
<dd><p>list of parameter-covariate effects, e.g.
<code>list(CL = list(WT = "pow", CRCL = "lin"), V = list(WT = "pow")</code>
Values in list need to match one of the effects allowed by pharmpy.</p></dd>


<dt id="arg-scale-observations">scale_observations<a class="anchor" aria-label="anchor" href="#arg-scale-observations"></a></dt>
<dd><p>scale observations by factor, e.g. due to unit
differences between dose and concentration. E.g. <code>scale_observations = 1000</code>
will add <code>S1 = V/1000</code> (for a 1-compartment model) to NONMEM code.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>data.frame as input to NONMEM / nlmixr.</p></dd>


<dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>name of model</p></dd>


<dt id="arg-estimation-method">estimation_method<a class="anchor" aria-label="anchor" href="#arg-estimation-method"></a></dt>
<dd><p>estimation method.</p></dd>


<dt id="arg-estimation-options">estimation_options<a class="anchor" aria-label="anchor" href="#arg-estimation-options"></a></dt>
<dd><p>options for estimation method, specified as list,
e.g. <code>NITER</code> or <code>ISAMPLE</code>.</p></dd>


<dt id="arg-uncertainty-method">uncertainty_method<a class="anchor" aria-label="anchor" href="#arg-uncertainty-method"></a></dt>
<dd><p>Compute uncertainty for parameter estimations.
One of <code>sandwich</code> (default), <code>smat</code>, <code>fmat</code>, <code>efim</code>.</p></dd>


<dt id="arg-tool">tool<a class="anchor" aria-label="anchor" href="#arg-tool"></a></dt>
<dd><p>output model type, either <code>nonmem</code> or <code>nlmixr</code></p></dd>


<dt id="arg-tables">tables<a class="anchor" aria-label="anchor" href="#arg-tables"></a></dt>
<dd><p>which pre-specified tables to add, defaults to <code>parameters</code>
and <code>fit</code> tables.</p></dd>


<dt id="arg-full-tables">full_tables<a class="anchor" aria-label="anchor" href="#arg-full-tables"></a></dt>
<dd><p>For the default tables, should all input columns from be
included in the output tables? Default <code>FALSE</code>.</p></dd>


<dt id="arg-auto-init">auto_init<a class="anchor" aria-label="anchor" href="#arg-auto-init"></a></dt>
<dd><p>automatically update initial estimates to reasonable values
based on a crude assessment of the PK data. Default is <code>TRUE</code>.</p></dd>


<dt id="arg-auto-stack-encounters">auto_stack_encounters<a class="anchor" aria-label="anchor" href="#arg-auto-stack-encounters"></a></dt>
<dd><p>detects if TIME within an individual is
decreasing from one record to another, which NONMEM cannot handle.
If this happens, it will add a reset event (EVID=3) at that time, and
increase the TIME for subsequent events so that NONMEM does not throw an
error. It will increase the time for the next encounter to the maximum
encounter length across all subjects in the dataset (rounded up to 100).
If no decreasing TIME is detected, nothing will be done (most common case).
This feature is useful e.g. for crossover trials when data on the same
individual ispresent but is included in the dataset as time-after-dose and
not actual time since first overall dose.</p></dd>


<dt id="arg-mu-reference">mu_reference<a class="anchor" aria-label="anchor" href="#arg-mu-reference"></a></dt>
<dd><p>MU-reference the model, useful for SAEM estimation
method.</p></dd>


<dt id="arg-settings">settings<a class="anchor" aria-label="anchor" href="#arg-settings"></a></dt>
<dd><p>additional settings for model creation and model estimation.
TBD</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>verbose output?</p></dd>


<dt id="arg-iiv-effect">iiv_effect<a class="anchor" aria-label="anchor" href="#arg-iiv-effect"></a></dt>
<dd><p>either <code>character</code> or <code>list</code>. If character, one of
<code>c("exp", "add", "prop", "log", "re_log")</code>. If <code>list</code>, should specify for
each parameter the effect type, e.g. <code>list(CL = "add", V = "exp")</code>. Default
is <code>"exp"</code> for all.</p></dd>

</dl></div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ron Keizer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

